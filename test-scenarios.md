# 회원가입 페이지 테스트 시나리오

## 1. 비밀번호 검증 테스트

### 1.1 예비창업자 회원가입 테스트

#### 테스트 케이스 1: 비밀번호 형식 오류 - 숫자만 입력
**목적**: 숫자만 입력했을 때 클라이언트 측 검증 확인
**단계**:
1. 회원가입 페이지 접속 (/auth/signup)
2. 회원 유형: "예비창업자" 선택 (기본값)
3. 이메일: `test@example.com` 입력
4. 비밀번호: `12345678` 입력 (숫자만)
5. 비밀번호 확인: `12345678` 입력
6. "회원가입 완료" 버튼 클릭

**예상 결과**:
- ✅ "비밀번호에 영문자가 포함되어야 합니다." 에러 메시지 표시
- ❌ "Invalid API key" 에러 발생하지 않음
- 비밀번호 입력 중 실시간 검증 상태 표시:
  - ✓ 8자 이상 만족 (녹색)
  - ✓ 영문자 포함 필요 (빨간색)
  - ✓ 숫자 포함 만족 (녹색)

#### 테스트 케이스 2: 비밀번호 형식 오류 - 영문자만 입력
**목적**: 영문자만 입력했을 때 클라이언트 측 검증 확인
**단계**:
1. 비밀번호: `abcdefgh` 입력 (영문자만)
2. 비밀번호 확인: `abcdefgh` 입력
3. "회원가입 완료" 버튼 클릭

**예상 결과**:
- ✅ "비밀번호에 숫자가 포함되어야 합니다." 에러 메시지 표시
- 실시간 검증 상태:
  - ✓ 8자 이상 만족 (녹색)
  - ✓ 영문자 포함 만족 (녹색)
  - ✓ 숫자 포함 필요 (빨간색)

#### 테스트 케이스 3: 비밀번호 길이 부족
**목적**: 8자 미만 입력 시 검증 확인
**단계**:
1. 비밀번호: `abc123` 입력 (6자)
2. 비밀번호 확인: `abc123` 입력
3. "회원가입 완료" 버튼 클릭

**예상 결과**:
- ✅ "비밀번호는 8자 이상이어야 합니다." 에러 메시지 표시
- 실시간 검증 상태:
  - ✓ 8자 이상 필요 (빨간색)
  - ✓ 영문자 포함 만족 (녹색)
  - ✓ 숫자 포함 만족 (녹색)

#### 테스트 케이스 4: 올바른 비밀번호 입력
**목적**: 조건을 만족하는 비밀번호로 정상 회원가입 확인
**단계**:
1. 이메일: `valid@example.com` 입력
2. 비밀번호: `password123` 입력 (영문자+숫자, 8자 이상)
3. 비밀번호 확인: `password123` 입력
4. "회원가입 완료" 버튼 클릭

**예상 결과**:
- ✅ 회원가입 성공
- ✅ "회원가입이 완료되었습니다. 이메일을 확인하여 계정을 인증해주세요." 알림
- ✅ 로그인 페이지로 리다이렉트
- 실시간 검증 상태 모두 녹색:
  - ✓ 8자 이상 만족
  - ✓ 영문자 포함 만족  
  - ✓ 숫자 포함 만족

#### 테스트 케이스 5: 비밀번호 확인 불일치
**목적**: 비밀번호 확인 검증 확인
**단계**:
1. 비밀번호: `password123` 입력
2. 비밀번호 확인: `password124` 입력 (다름)
3. "회원가입 완료" 버튼 클릭

**예상 결과**:
- ✅ "비밀번호가 일치하지 않습니다." 에러 메시지 표시

## 2. 사업자등록번호 검증 테스트

### 2.1 창업자 회원가입 테스트

#### 테스트 케이스 6: 사업자등록번호 없이 검증 시도
**목적**: 사업자등록번호 입력 전 검증 버튼 상태 확인
**단계**:
1. 회원 유형: "창업자" 선택
2. 이메일, 비밀번호 입력 후 "다음 단계" 클릭
3. 사업자등록번호 입력 없이 "검증" 버튼 확인

**예상 결과**:
- ✅ "검증" 버튼이 비활성화 상태
- ✅ 회사명 입력창에 "사업자등록번호 검증 시 자동 입력됩니다" 플레이스홀더 표시

#### 테스트 케이스 7: 유효한 테스트 사업자등록번호 검증
**목적**: 테스트용 사업자등록번호로 회사명 자동 입력 확인
**단계**:
1. 사업자등록번호: `123-45-67890` 입력
2. "검증" 버튼 클릭

**예상 결과**:
- ✅ "검증 중..." 버튼 상태로 변경
- ✅ 검증 성공 후 "✓ 검증완료" 상태
- ✅ 회사명 자동 입력: "테스트 주식회사"
- ✅ 회사명 입력창이 읽기 전용(readOnly)으로 변경, 녹색 배경
- ✅ "✓ 검증된 회사명입니다" 메시지 표시
- ✅ "✓ 사업자등록번호가 확인되었습니다" 메시지 표시

#### 테스트 케이스 8: 실제 등록된 사업자등록번호 테스트
**목적**: 실제 기업 데이터로 검증 확인
**단계**:
1. 사업자등록번호: `123-88-61322` 입력 (쿠팡)
2. "검증" 버튼 클릭

**예상 결과**:
- ✅ 검증 성공
- ✅ 회사명 자동 입력: "쿠팡 주식회사"
- ✅ 회사명 입력창 읽기 전용으로 변경

#### 테스트 케이스 9: 사용자가 회사명 입력 후 검증 (회사명 변경)
**목적**: 검증 시 회사명이 변경되는 케이스 확인
**단계**:
1. 회사명: "잘못된 회사명" 입력
2. 사업자등록번호: `123-88-61322` 입력
3. "검증" 버튼 클릭

**예상 결과**:
- ✅ 검증 성공
- ✅ "회사명이 '쿠팡 주식회사'(으)로 확인되어 수정되었습니다." 알림
- ✅ 회사명이 "쿠팡 주식회사"로 변경
- ✅ 입력창 읽기 전용으로 변경

#### 테스트 케이스 10: 잘못된 형식의 사업자등록번호
**목적**: 형식 검증 확인
**단계**:
1. 사업자등록번호: `123-4567-890` 입력 (잘못된 형식)
2. "검증" 버튼 클릭

**예상 결과**:
- ✅ "올바른 사업자등록번호 형식이 아닙니다." 에러 메시지
- ❌ 검증 실패 상태 유지

#### 테스트 케이스 11: 등록되지 않은 사업자등록번호
**목적**: 존재하지 않는 사업자등록번호 처리 확인
**단계**:
1. 사업자등록번호: `999-99-99999` 입력
2. "검증" 버튼 클릭

**예상 결과**:
- ✅ "등록되지 않은 사업자등록번호입니다." 에러 메시지
- ❌ 검증 실패 상태 유지

#### 테스트 케이스 12: 검증 없이 회원가입 시도
**목적**: 검증하지 않고 회원가입 시도 시 차단 확인
**단계**:
1. 사업자등록번호: `123-45-67890` 입력 (검증하지 않음)
2. "회원가입 완료" 버튼 클릭

**예상 결과**:
- ✅ "사업자등록번호 검증이 필요합니다." 에러 메시지
- ❌ 회원가입 진행되지 않음

#### 테스트 케이스 13: 검증 완료 후 회원가입
**목적**: 정상적인 창업자 회원가입 플로우 확인
**단계**:
1. 이메일: `founder@company.com` 입력
2. 비밀번호: `companypass123` 입력
3. 사업자등록번호: `123-45-67890` 입력 후 검증 완료
4. "회원가입 완료" 버튼 클릭

**예상 결과**:
- ✅ 회원가입 성공
- ✅ 프로필에 회사명, 사업자등록번호 저장
- ✅ 로그인 페이지로 리다이렉트

### 2.2 사업자등록번호 검증 후 수정 시도 테스트

#### 테스트 케이스 14: 검증 완료 후 사업자등록번호 수정
**목적**: 검증 완료 상태에서 사업자등록번호 변경 시 동작 확인
**단계**:
1. 사업자등록번호 검증 완료 상태
2. 사업자등록번호 입력창에서 번호 변경 시도

**예상 결과**:
- ✅ 사업자등록번호 입력창이 비활성화되어 수정 불가
- ✅ 검증 상태 유지

#### 테스트 케이스 15: 검증 완료 후 회사명 수정 시도
**목적**: 검증 완료 상태에서 회사명 변경 시 동작 확인
**단계**:
1. 사업자등록번호 검증 완료 상태
2. 회사명 입력창에서 이름 변경 시도

**예상 결과**:
- ✅ 회사명 입력창이 읽기 전용(readOnly)으로 수정 불가
- ✅ 검증된 회사명 유지

## 3. 에지 케이스 테스트

### 3.1 네트워크 오류 테스트

#### 테스트 케이스 16: 사업자등록번호 검증 API 오류
**목적**: API 호출 실패 시 처리 확인
**단계**:
1. 개발자 도구에서 네트워크 차단
2. 사업자등록번호 검증 시도

**예상 결과**:
- ✅ "검증 중 오류가 발생했습니다." 에러 메시지
- ❌ 검증 실패 상태

#### 테스트 케이스 17: Supabase Auth 오류
**목적**: 회원가입 시 Supabase 에러 처리 확인
**단계**:
1. 이미 가입된 이메일로 회원가입 시도

**예상 결과**:
- ✅ "이미 가입된 이메일 주소입니다." 사용자 친화적 에러 메시지
- ❌ 원본 Supabase 에러 메시지 노출되지 않음

### 3.2 UI/UX 테스트

#### 테스트 케이스 18: 반응형 디자인
**목적**: 모바일 환경에서 정상 동작 확인
**단계**:
1. 모바일 화면 크기로 조정
2. 모든 입력창과 버튼 접근 확인
3. 에러 메시지 표시 확인

**예상 결과**:
- ✅ 모든 요소가 모바일 환경에 적절히 표시
- ✅ 버튼 클릭 가능
- ✅ 에러 메시지 가독성 유지

#### 테스트 케이스 19: 접근성 테스트
**목적**: 키보드 네비게이션 및 스크린 리더 지원 확인
**단계**:
1. 마우스 없이 Tab 키로 모든 요소 탐색
2. Enter 키로 버튼 클릭
3. 라벨과 입력창 연결 확인

**예상 결과**:
- ✅ 모든 입력창에 Tab 키로 접근 가능
- ✅ 적절한 포커스 순서
- ✅ 라벨이 입력창과 올바르게 연결

## 4. 성능 테스트

#### 테스트 케이스 20: 빠른 연속 클릭 방지
**목적**: 중복 요청 방지 확인
**단계**:
1. "검증" 버튼 빠르게 여러 번 클릭
2. "회원가입 완료" 버튼 빠르게 여러 번 클릭

**예상 결과**:
- ✅ 버튼이 비활성화되어 중복 요청 방지
- ✅ 로딩 상태 표시

## 테스트 환경 설정

### 환경 변수 설정
```env
# 테스트 모드 활성화
BUSINESS_VERIFICATION_TEST_MODE=true

# 실제 API 테스트 시 (선택사항)
BIZNO_API_KEY=your_bizno_api_key
NTS_API_KEY=your_nts_api_key
```

### 테스트 데이터

#### 테스트용 사업자등록번호
- `123-45-67890`: 테스트 주식회사
- `123-88-61322`: 쿠팡 주식회사  
- `106-86-33881`: 당근마켓 주식회사
- `220-81-62517`: 토스 (비바리퍼블리카)
- `107-87-83297`: 배달의민족 (우아한형제들)

#### 테스트용 이메일 주소
- 예비창업자: `test@example.com`, `user@gmail.com`
- 창업자: `founder@company.com`, `ceo@startup.co.kr`
- VC: `partner@vc.com`, `analyst@investment.co.kr`

### 자동화 테스트 스크립트 예시

```javascript
// 예시: Playwright를 사용한 E2E 테스트
describe('회원가입 페이지', () => {
  test('비밀번호 검증: 숫자만 입력 시 에러 메시지', async ({ page }) => {
    await page.goto('/auth/signup');
    await page.fill('#email', 'test@example.com');
    await page.fill('#password', '12345678');
    await page.fill('#confirmPassword', '12345678');
    await page.click('button[type="submit"]');
    
    await expect(page.locator('.text-red-600')).toContainText('비밀번호에 영문자가 포함되어야 합니다.');
  });
  
  test('사업자등록번호 검증: 정상 검증', async ({ page }) => {
    await page.goto('/auth/signup');
    await page.check('input[value="founder"]');
    // ... 기본 정보 입력
    await page.click('text=다음 단계');
    await page.fill('#businessRegistrationNumber', '123-45-67890');
    await page.click('text=검증');
    
    await expect(page.locator('.text-green-600')).toContainText('✓ 검증된 회사명입니다');
    await expect(page.locator('#companyName')).toHaveValue('테스트 주식회사');
  });
});
```

이 테스트 시나리오를 통해 회원가입 페이지의 모든 주요 기능과 에지 케이스를 체계적으로 검증할 수 있습니다.